{"remainingRequest":"/Users/kiyoungtack/Desktop/boiler/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts","dependencies":[{"path":"/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts","mtime":1611593478980},{"path":"/Users/kiyoungtack/Desktop/boiler/.babelrc","mtime":1610697389559},{"path":"/Users/kiyoungtack/Desktop/boiler/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kiyoungtack/Desktop/boiler/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGRiIGZyb20gJ2RiJzsKCmNvbnN0IGhvbWUgPSBhc3luYyBjdHggPT4gewogIGNvbnN0IHBvc3RzID0gYXdhaXQgZGIucG9zdHMuZmluZCgpLnNvcnQoewogICAgX2lkOiAtMQogIH0pLmxpbWl0KDIwKTsKICBjdHguYm9keSA9IHBvc3RzOwp9OwoKY29uc3QgdGFnID0gYXN5bmMgY3R4ID0+IHsKICBjb25zdCB7CiAgICB0YWcKICB9ID0gY3R4LnBhcmFtczsKICBjb25zdCBwb3N0cyA9IGF3YWl0IGRiLnBvc3RzLmZpbmQoewogICAgdGFnczogewogICAgICAkaW46IFt0YWddCiAgICB9CiAgfSkuc29ydCh7CiAgICBfaWQ6IC0xCiAgfSkubGltaXQoMjApOwogIGN0eC5ib2R5ID0gcG9zdHM7Cn07Cgpjb25zdCBob3RQb3N0cyA9IGFzeW5jIGN0eCA9PiB7CiAgY29uc3QgcG9zdHMgPSBhd2FpdCBkYi5wb3N0cy5maW5kKCkuc29ydCh7CiAgICB2aWV3czogLTEKICB9KS5zb3J0KHsKICAgIF9pZDogLTEKICB9KS5saW1pdCgyMCk7CiAgY3R4LmJvZHkgPSBwb3N0czsKfTsKCmNvbnN0IGpvYnMgPSBhc3luYyBjdHggPT4gewogIGNvbnN0IGpvYnMgPSBhd2FpdCBkYi5qb2JzLmZpbmQoKS5zb3J0KHsKICAgIF9pZDogLTEKICB9KS5saW1pdCgyMCk7CiAgY3R4LmJvZHkgPSBqb2JzOwp9OwoKY29uc3QgaG90Sm9icyA9IGFzeW5jIGN0eCA9PiB7CiAgY29uc3Qgam9icyA9IGF3YWl0IGRiLmpvYnMuZmluZCgpLnNvcnQoewogICAgdmlld3M6IC0xCiAgfSkuc29ydCh7CiAgICBfaWQ6IC0xCiAgfSkubGltaXQoMjApOwogIGN0eC5ib2R5ID0gam9iczsKfTsKCmNvbnN0IHByb2R1Y3RzID0gYXN5bmMgY3R4ID0+IHsKICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLm1hcmtldHMuZmluZCgpLnNvcnQoewogICAgX2lkOiAtMQogIH0pLmxpbWl0KDIwKTsKICBjdHguYm9keSA9IHByb2R1Y3RzOwp9OwoKY29uc3QgaG90UHJvZHVjdHMgPSBhc3luYyBjdHggPT4gewogIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgZGIubWFya2V0cy5maW5kKCkuc29ydCh7CiAgICB2aWV3czogLTEKICB9KS5zb3J0KHsKICAgIF9pZDogLTEKICB9KS5saW1pdCgyMCk7CiAgY3R4LmJvZHkgPSBwcm9kdWN0czsKfTsKCmNvbnN0IHN0YXRzID0gYXN5bmMgY3R4ID0+IHsKICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGRiLm1hcmtldHMuZmluZCgpLmNvdW50RG9jdW1lbnRzKCk7CiAgY29uc3QgdXNlcnMgPSBhd2FpdCBkYi51c2Vycy5maW5kKCkuY291bnREb2N1bWVudHMoKTsKICBjb25zdCBwb3N0cyA9IGF3YWl0IGRiLnBvc3RzLmZpbmQoKS5jb3VudERvY3VtZW50cygpOwogIGNvbnN0IGpvYnMgPSBhd2FpdCBkYi5qb2JzLmZpbmQoKS5jb3VudERvY3VtZW50cygpOwogIGNvbnN0IHBvc3QxZGF5ID0gYXdhaXQgZGIucG9zdHMuZmluZCgpLnNvcnQoewogICAgZGF0ZWZpZWxkOiAtMQogIH0pLmNvdW50RG9jdW1lbnRzKCk7CiAgY29uc3QgdXNlcjFkYXkgPSBhd2FpdCBkYi51c2Vycy5maW5kKCkuc29ydCh7CiAgICBkYXRlZmllbGQ6IC0xCiAgfSkuY291bnREb2N1bWVudHMoKTsKICBjb25zdCBwcm9kdWN0MWRheSA9IGF3YWl0IGRiLm1hcmtldHMuZmluZCgpLnNvcnQoewogICAgZGF0ZWZpZWxkOiAtMQogIH0pLmNvdW50RG9jdW1lbnRzKCk7CiAgY29uc3Qgam9iMWRheSA9IGF3YWl0IGRiLmpvYnMuZmluZCgpLnNvcnQoewogICAgZGF0ZWZpZWxkOiAtMQogIH0pLmNvdW50RG9jdW1lbnRzKCk7CiAgY3R4LmJvZHkgPSB7CiAgICB1c2VycywKICAgIHVzZXIxZGF5LAogICAgcHJvZHVjdHMsCiAgICBwcm9kdWN0MWRheSwKICAgIHBvc3RzLAogICAgcG9zdDFkYXksCiAgICBqb2JzLAogICAgam9iMWRheQogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdHMsCiAgaG9tZSwKICB0YWcsCiAgaG90UG9zdHMsCiAgam9icywKICBob3RKb2JzLAogIHByb2R1Y3RzLAogIGhvdFByb2R1Y3RzCn07"},{"version":3,"sources":["/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts"],"names":["db","home","ctx","posts","find","sort","_id","limit","body","tag","params","tags","$in","hotPosts","views","jobs","hotJobs","products","markets","hotProducts","stats","countDocuments","users","post1day","datefield","user1day","product1day","job1day"],"mappings":"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","sourcesContent":["import db from 'db';\nimport { Controller } from './types';\n\nconst home: Controller = async (ctx) => {\n  const posts = await db.posts.find().sort({ _id: -1 }).limit(20);\n  ctx.body = posts;\n};\n\nconst tag: Controller = async (ctx) => {\n  const { tag } = ctx.params;\n  const posts = await db.posts\n    .find({ tags: { $in: [tag] } })\n    .sort({ _id: -1 })\n    .limit(20);\n  ctx.body = posts;\n};\n\nconst hotPosts: Controller = async (ctx) => {\n  const posts = await db.posts\n    .find()\n    .sort({ views: -1 })\n    .sort({ _id: -1 })\n    .limit(20);\n  ctx.body = posts;\n};\n\nconst jobs: Controller = async (ctx) => {\n  const jobs = await db.jobs.find().sort({ _id: -1 }).limit(20);\n  ctx.body = jobs;\n};\n\nconst hotJobs: Controller = async (ctx) => {\n  const jobs = await db.jobs\n    .find()\n    .sort({ views: -1 })\n    .sort({ _id: -1 })\n    .limit(20);\n  ctx.body = jobs;\n};\n\nconst products: Controller = async (ctx) => {\n  const products = await db.markets.find().sort({ _id: -1 }).limit(20);\n  ctx.body = products;\n};\n\nconst hotProducts: Controller = async (ctx) => {\n  const products = await db.markets\n    .find()\n    .sort({ views: -1 })\n    .sort({ _id: -1 })\n    .limit(20);\n  ctx.body = products;\n};\n\nconst stats: Controller = async (ctx) => {\n  const products = await db.markets.find().countDocuments();\n  const users = await db.users.find().countDocuments();\n  const posts = await db.posts.find().countDocuments();\n  const jobs = await db.jobs.find().countDocuments();\n  const post1day = await db.posts\n    .find()\n    .sort({ datefield: -1 })\n    .countDocuments();\n  const user1day = await db.users\n    .find()\n    .sort({ datefield: -1 })\n    .countDocuments();\n\n  const product1day = await db.markets\n    .find()\n    .sort({ datefield: -1 })\n    .countDocuments();\n\n  const job1day = await db.jobs.find().sort({ datefield: -1 }).countDocuments();\n\n  ctx.body = {\n    users,\n    user1day,\n    products,\n    product1day,\n    posts,\n    post1day,\n    jobs,\n    job1day,\n  };\n};\n\nexport default {\n  stats,\n  home,\n  tag,\n  hotPosts,\n  jobs,\n  hotJobs,\n  products,\n  hotProducts,\n};\n"]}]}