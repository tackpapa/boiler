{"remainingRequest":"/Users/kiyoungtack/Desktop/boiler/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts","dependencies":[{"path":"/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts","mtime":1611248998972},{"path":"/Users/kiyoungtack/Desktop/boiler/.babelrc","mtime":1610697389559},{"path":"/Users/kiyoungtack/Desktop/boiler/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kiyoungtack/Desktop/boiler/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGRiIGZyb20gJ2RiJzsKCmNvbnN0IGhvbWUgPSBhc3luYyBjdHggPT4gewogIGNvbnN0IHBvc3RzID0gYXdhaXQgZGIucG9zdHMuZmluZCgpLnNvcnQoewogICAgX2lkOiAtMQogIH0pLmxpbWl0KDIwKTsKICBjdHguYm9keSA9IHBvc3RzOwp9OwoKY29uc3QgdGFnID0gYXN5bmMgY3R4ID0+IHsKICBjb25zdCB7CiAgICB0YWcKICB9ID0gY3R4LnBhcmFtczsKICBjb25zdCBwb3N0cyA9IGF3YWl0IGRiLnBvc3RzLmZpbmQoewogICAgdGFnczogewogICAgICAkaW46IFt0YWddCiAgICB9CiAgfSkuc29ydCh7CiAgICBfaWQ6IC0xCiAgfSkubGltaXQoMjApOwogIGN0eC5ib2R5ID0gcG9zdHM7Cn07Cgpjb25zdCBob3RQb3N0ID0gYXN5bmMgY3R4ID0+IHsKICBjb25zdCBwb3N0cyA9IGF3YWl0IGRiLnBvc3RzLmZpbmQoKS5zb3J0KHsKICAgIHZpZXdzOiAtMQogIH0pLnNvcnQoewogICAgX2lkOiAtMQogIH0pLmxpbWl0KDIpOwogIGN0eC5ib2R5ID0gcG9zdHM7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgaG9tZSwKICB0YWcsCiAgaG90UG9zdAp9Ow=="},{"version":3,"sources":["/Users/kiyoungtack/Desktop/boiler/src/controllers/apiController.ts"],"names":["db","home","ctx","posts","find","sort","_id","limit","body","tag","params","tags","$in","hotPost","views"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;;AAGA,MAAMC,IAAgB,GAAG,MAAOC,GAAP,IAAe;AACtC,QAAMC,KAAK,GAAG,MAAMH,EAAE,CAACG,KAAH,CAASC,IAAT,GAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,GAAG,EAAE,CAAC;AAAR,GAArB,EAAkCC,KAAlC,CAAwC,EAAxC,CAApB;AACAL,EAAAA,GAAG,CAACM,IAAJ,GAAWL,KAAX;AACD,CAHD;;AAKA,MAAMM,GAAe,GAAG,MAAOP,GAAP,IAAe;AACrC,QAAM;AAAEO,IAAAA;AAAF,MAAUP,GAAG,CAACQ,MAApB;AACA,QAAMP,KAAK,GAAG,MAAMH,EAAE,CAACG,KAAH,CACjBC,IADiB,CACZ;AAAEO,IAAAA,IAAI,EAAE;AAAEC,MAAAA,GAAG,EAAE,CAACH,GAAD;AAAP;AAAR,GADY,EAEjBJ,IAFiB,CAEZ;AAAEC,IAAAA,GAAG,EAAE,CAAC;AAAR,GAFY,EAGjBC,KAHiB,CAGX,EAHW,CAApB;AAIAL,EAAAA,GAAG,CAACM,IAAJ,GAAWL,KAAX;AACD,CAPD;;AASA,MAAMU,OAAmB,GAAG,MAAOX,GAAP,IAAe;AACzC,QAAMC,KAAK,GAAG,MAAMH,EAAE,CAACG,KAAH,CACjBC,IADiB,GAEjBC,IAFiB,CAEZ;AAAES,IAAAA,KAAK,EAAE,CAAC;AAAV,GAFY,EAGjBT,IAHiB,CAGZ;AAAEC,IAAAA,GAAG,EAAE,CAAC;AAAR,GAHY,EAIjBC,KAJiB,CAIX,CAJW,CAApB;AAKAL,EAAAA,GAAG,CAACM,IAAJ,GAAWL,KAAX;AACD,CAPD;;AASA,eAAe;AAAEF,EAAAA,IAAF;AAAQQ,EAAAA,GAAR;AAAaI,EAAAA;AAAb,CAAf","sourcesContent":["import db from 'db';\nimport { Controller } from './types';\n\nconst home: Controller = async (ctx) => {\n  const posts = await db.posts.find().sort({ _id: -1 }).limit(20);\n  ctx.body = posts;\n};\n\nconst tag: Controller = async (ctx) => {\n  const { tag } = ctx.params;\n  const posts = await db.posts\n    .find({ tags: { $in: [tag] } })\n    .sort({ _id: -1 })\n    .limit(20);\n  ctx.body = posts;\n};\n\nconst hotPost: Controller = async (ctx) => {\n  const posts = await db.posts\n    .find()\n    .sort({ views: -1 })\n    .sort({ _id: -1 })\n    .limit(2);\n  ctx.body = posts;\n};\n\nexport default { home, tag, hotPost };\n"]}]}